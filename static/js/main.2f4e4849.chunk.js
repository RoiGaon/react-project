(this.webpackJsonpreact_project=this.webpackJsonpreact_project||[]).push([[0],{26:function(e,t,n){e.exports={form:"NewCard_form__VaD79",control:"NewCard_control__3JQPQ",actions:"NewCard_actions__3MRQS"}},27:function(e,t,n){e.exports={header:"Navbar_header__1Wk50",active:"Navbar_active__32sLB",badge:"Navbar_badge__3zEus"}},29:function(e,t,n){e.exports={item:"HotelCardItem_item__2rJpF",image:"HotelCardItem_image__1nV9f",content:"HotelCardItem_content__3E6ln",actions:"HotelCardItem_actions__1LOyz"}},54:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(19),c=n.n(a),s=(n(54),n(7)),i=n(10),o=n(27),l=n.n(o),d=n(34),b=n(17),j=n(2),u=Object(r.createContext)({favorites:[],totalFavorites:0,addFavorites:function(e){},removeFavorites:function(e){},isItemFavorite:function(e){}});function h(e){var t=Object(r.useState)([]),n=Object(s.a)(t,2),a=n[0],c=n[1];var i={favorites:a,totalFavorites:a.length,addFavorites:function(e){c((function(t){return t.concat(e)}))},removeFavorites:function(e){c((function(t){return t.filter((function(t){return e!==t._id}))}))},isItemFavorite:function(e){return a.some((function(t){return e===t._id}))}};return Object(j.jsx)(u.Provider,{value:i,children:e.children})}var m=u;function f(e){var t=e.width,n=e.children;return Object(j.jsx)("div",{className:"ma2 tc bg-washed-red ".concat(t," dib br3 pa3 bw2 shadow-5"),children:n})}var O=n(29),p=n.n(O);function x(e){var t=e._id,n=e.bizName,a=e.bizImage,c=e.bizPhone,s=e.bizAddress,i=e.bizDescription,o=e.user,l=e.delOption,d=e.deleteCardHandler,b=Object(r.useContext)(m),u=b.isItemFavorite(t);return Object(j.jsx)(f,{width:"w-30-l w-70-m",children:Object(j.jsxs)("div",{className:p.a.item,children:[Object(j.jsx)("div",{className:p.a.image,children:Object(j.jsx)("img",{src:a,alt:n})}),Object(j.jsxs)("div",{className:p.a.content,children:[Object(j.jsx)("h3",{children:n}),Object(j.jsx)("address",{children:s}),Object(j.jsx)("p",{children:c}),Object(j.jsx)("p",{children:i})]}),Object(j.jsx)("div",{className:p.a.actions,children:Object(j.jsx)("button",{onClick:function(){u?b.removeFavorites(t):b.addFavorites({_id:t,bizName:n,bizImage:a,bizPhone:c,bizAddress:s,bizDescription:i,userId:o._id})},children:u?"Remove From Favorites":"Add To Favorites"})}),Object(j.jsx)("br",{}),o.biz&&l?Object(j.jsx)("div",{className:p.a.actions,children:Object(j.jsx)("button",{onClick:function(){return d(t)},children:"Delete Card"})}):null]})})}function v(e){var t=e.cards,n=e.user,r=e.delOption,a=e.deleteCardHandler;return Object(j.jsx)("div",{className:"tc",children:t.map((function(e){return Object(j.jsx)(x,{_id:e._id,bizImage:e.bizImage,bizName:e.bizName,bizPhone:e.bizPhone,bizAddress:e.bizAddress,bizDescription:e.bizDescription,user:n,delOption:r,deleteCardHandler:a},e._id)}))})}var g=function(e){var t=e.searchChange,n=void 0===t?function(e){return e}:t;return Object(j.jsx)("div",{className:"tc",children:Object(j.jsx)("input",{className:"tc pa2 ba b-washed-blue bg-washed-red",type:"search",placeholder:"Search Hotel",onChange:n})})};function N(e){var t=e.children;return Object(j.jsx)("div",{style:{overflow:"scroll",overflowX:"hidden",border:"5px solid black",height:"700px"},children:t})}var w="http://localhost:3000";function z(e,t){if(e){fetch("http://localhost:3000/api/users/me",{headers:{"x-auth-token":e}}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return t(e)}))}}function _(e){return{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}}var k=n(26),C=n.n(k);function F(e){var t=e.addHotel,n=void 0===t?function(e){return e}:t,a=Object(r.useRef)(),c=Object(r.useRef)(),s=Object(r.useRef)(),i=Object(r.useRef)(),o=Object(r.useRef)();return Object(j.jsx)("form",{className:C.a.form,onSubmit:function(e){e.preventDefault();var t=a.current.value,r=c.current.value,l=o.current.value,d=s.current.value,b=i.current.value;n({bizName:t,bizImage:r,bizAddress:d,bizDescription:b,bizPhone:l})},children:Object(j.jsxs)(f,{width:"w-100",children:[Object(j.jsxs)("div",{className:C.a.control,children:[Object(j.jsx)("label",{htmlFor:"name",children:"Biz Name: "}),Object(j.jsx)("input",{type:"text",id:"name",required:!0,ref:a})]}),Object(j.jsxs)("div",{className:C.a.control,children:[Object(j.jsx)("label",{htmlFor:"image",children:"Biz Image: "}),Object(j.jsx)("input",{type:"url",id:"image",required:!0,ref:c})]}),Object(j.jsxs)("div",{className:C.a.control,children:[Object(j.jsx)("label",{htmlFor:"address",children:"Biz Address: "}),Object(j.jsx)("input",{type:"text",id:"address",required:!0,ref:s})]}),Object(j.jsxs)("div",{className:C.a.control,children:[Object(j.jsx)("label",{htmlFor:"phone",children:"Biz Phone: "}),Object(j.jsx)("input",{type:"phone",id:"phone",required:!0,ref:o})]}),Object(j.jsxs)("div",{className:C.a.control,children:[Object(j.jsx)("label",{htmlFor:"description",children:"Biz description: "}),Object(j.jsx)("textarea",{rows:"4",id:"description",required:!0,ref:i})]}),Object(j.jsx)("div",{className:C.a.actions,children:Object(j.jsx)("button",{children:"Add Card"})})]})})}var I=n(13);function S(e){var t=e.onRegistration,n=void 0===t?function(e){return e}:t,a=e.name,c=e.isBiz,s=e.setIsBiz,i=r.useRef(""),o=r.useRef(""),l=r.useRef("");return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("article",{className:"br3 ba b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center",children:Object(j.jsx)("main",{className:"pa4 black-80",children:Object(j.jsxs)("div",{className:"measure",children:[Object(j.jsxs)("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0",children:[Object(j.jsx)("legend",{className:"f1 fw6 ph0 mh0",children:a}),Object(j.jsxs)("div",{className:"mt3",children:[Object(j.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"name",id:"name",ref:i})]}),Object(j.jsxs)("div",{className:"mt3",children:[Object(j.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address",children:"Email"}),Object(j.jsx)("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address",ref:o})]}),Object(j.jsxs)("div",{className:"mv3",children:[Object(j.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"password",children:"Password"}),Object(j.jsx)("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",ref:l})]})]}),Object(j.jsxs)("div",{className:"tc",children:[Object(j.jsx)("input",{onClick:function(){var e,t=function(e,t,n,r){var a="",c={email:e,password:t,name:n,biz:r};(!c.password||c.password.trim().length<6)&&(a="*Password must hace 6 letters*"),c.email&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(c.email)||(a+="*Must enter valid email*");return(!c.name||c.name.length<2)&&(a+="*Name must have at leat two letters*"),a||c}(o.current.value,l.current.value,i.current.value,c);"string"===typeof t?(e=t,Object(I.b)(e)):n(t)},className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:a}),Object(j.jsx)("p",{className:" grow pointer",onClick:function(){return s(!c)},children:c?"Register":"Biz-Register"})]})]})})})})}function y(e){var t=e.onSubmitSignIn,n=void 0===t?function(e){return e}:t,a=r.useRef(""),c=r.useRef("");return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("article",{className:" br3 ba b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center",children:Object(j.jsx)("main",{className:"pa4 black-80",children:Object(j.jsxs)("div",{className:"measure",children:[Object(j.jsxs)("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0",children:[Object(j.jsx)("legend",{className:"f1 fw6 ph0 mh0",children:"Sign In"}),Object(j.jsxs)("div",{className:"mt3",children:[Object(j.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address",children:"Email"}),Object(j.jsx)("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address",ref:a})]}),Object(j.jsxs)("div",{className:"mv3",children:[Object(j.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"password",children:"Password"}),Object(j.jsx)("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",ref:c})]})]}),Object(j.jsx)("div",{className:"tc",children:Object(j.jsx)("input",{onClick:function(){var e=function(e,t){var n="",r={email:e,password:t};(!r.password||r.password.trim().length<6)&&(n="*Password must have 6 letters*"),r.email&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r.email)||(n+="Must enter valid email*");return n||r}(a.current.value,c.current.value);"string"===typeof e?Object(I.b)(e):n(e)},className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign in"})})]})})})})}var B=n(47),R=n(28),A=n(48),L=n(46);var H=[{name:"Profile",href:"/profile",page:function(e){var t=e.user,n=Object(i.f)(),a=r.useState([]),c=Object(s.a)(a,2),o=c[0],l=c[1],d=r.useState(!0),b=Object(s.a)(d,2),u=b[0],h=b[1],m=r.useState(""),O=Object(s.a)(m,2),p=O[0],x=O[1],z=localStorage.getItem("token");r.useEffect((function(){h(!0),function(e,t){fetch("http://localhost:3000/api/users/mecards",{headers:{"x-auth-token":e}}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return t(e)}))}(z,(function(e){l(e)})),h(!1)}),[z]);var _,k=o.filter((function(e){return e.bizName.toLowerCase().includes(p.toLowerCase())}));return u?Object(j.jsx)("h1",{children:"Loading..."}):(_=o.length>0?Object(j.jsx)("h4",{className:"tc",children:"Here's Cards You Created"}):Object(j.jsx)("h4",{className:"tc pointer",onClick:function(){return n.push("new-card")},children:"Start Create Your Own Cards...!"}),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("br",{}),Object(j.jsx)("div",{className:"tc",children:Object(j.jsxs)(f,{children:[Object(j.jsxs)("h1",{children:["Hello ",t.name," !"]}),Object(j.jsx)("p",{children:t.email}),_]})}),Object(j.jsx)("br",{}),o.length>0?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g,{searchChange:function(e){x(e.target.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)(N,{children:Object(j.jsx)(v,{cards:k,delOption:!0,user:t,deleteCardHandler:function(e){!function(e,t,n){fetch(w+"/api/cards/"+e,{method:"DELETE",headers:{"x-auth-token":t}}).then((function(e){return e.json()})).then((function(e){return n(e)})).catch((function(e){return n(e)}))}(e,z,(function(){l(o.filter((function(t){return e!==t._id})))}))}})})]}):null]}))},loggedIn:!0,notBiz:!1,icon:Object(j.jsx)(L.a,{})},{name:"Home",href:"/all-cards",page:function(e){var t=e.user,n=r.useState(!0),a=Object(s.a)(n,2),c=a[0],i=a[1],o=r.useState([]),l=Object(s.a)(o,2),d=l[0],b=l[1],u=r.useState(""),h=Object(s.a)(u,2),m=h[0],f=h[1];r.useEffect((function(){var e;return i(!0),e=function(e){b(e),i(!1)},fetch("http://localhost:3000/api/cards").then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(t){return e(t)})),function(){return console.log("cleanUp")}}),[]);var O=d.filter((function(e){return e.bizName.toLowerCase().includes(m.toLowerCase())}));return c?Object(j.jsx)("h1",{children:"Loading..."}):Object(j.jsxs)("div",{children:[Object(j.jsx)("br",{}),Object(j.jsx)("h1",{className:"tc",children:"Choose Hotels!"}),Object(j.jsx)("br",{}),Object(j.jsx)(g,{searchChange:function(e){f(e.target.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)(N,{children:Object(j.jsx)(v,{cards:O,user:t,delOption:!1})})]})},loggedIn:!0,notBiz:!0,icon:Object(j.jsx)(B.a,{})},{name:"About",href:"/about",page:function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("br",{}),Object(j.jsx)("h1",{className:"tc",children:"The About Page"})]})},loggedIn:!0,notBiz:!0,icon:Object(j.jsx)(R.b,{})},{name:"New Card",href:"/new-card",page:function(){var e=Object(i.f)();return Object(j.jsxs)("section",{children:[Object(j.jsx)("br",{}),Object(j.jsx)("h1",{className:"tc",children:"Add New Card"}),Object(j.jsx)(F,{addHotel:function(t){!function(e,t,n){var r=_(e);r.headers["x-auth-token"]=t,fetch("http://localhost:3000/api/cards",r).then((function(e){return e.json()})).then((function(e){return n(e)})).catch((function(e){return n(e)}))}(t,localStorage.getItem("token"),(function(){Object(I.b)("Added Successfully!"),e.push("/all-cards")}))}})]})},loggedIn:!0,notBiz:!1,icon:Object(j.jsx)(R.a,{})},{name:"Favorites",href:"/favorites",page:function(e){var t,n=e.user,a=r.useState(""),c=Object(s.a)(a,2),i=c[0],o=c[1],d=r.useContext(m),b=d.favorites.filter((function(e){return e.bizName.toLowerCase().includes(i.toLowerCase())}));return t=0===d.totalFavorites?Object(j.jsx)("p",{children:"You got no favorites yet. Start adding some?"}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g,{searchChange:function(e){o(e.target.value)}}),Object(j.jsx)(v,{cards:b,user:n})]}),Object(j.jsxs)("section",{className:"tc",children:[Object(j.jsx)("br",{}),Object(j.jsxs)("h1",{className:"tc",children:["My Favorites",Object(j.jsx)("span",{className:l.a.badge,children:d.totalFavorites})]}),t]})},loggedIn:!0,notBiz:!0,icon:Object(j.jsx)(A.a,{})},{name:"Sign In",href:"/",page:function(e){var t=e.set,n=Object(i.f)();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(y,{onSubmitSignIn:function(e){!function(e,t){var n=_(e);fetch("http://localhost:3000/api/auth",n).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return t(e)}))}(e,(function(e){e.token?(Object(I.b)("Welcome to U"),localStorage.setItem("token",e.token),z(e.token,(function(e){t(e)})),n.replace("/all-cards")):Object(I.b)("Fail to log in")}))}})})},loggedIn:!1,icon:Object(j.jsx)(d.a,{})},{name:"Register",href:"/register",page:function(e){var t=e.set,n=r.useState(!1),a=Object(s.a)(n,2),c=a[0],o=a[1],l=Object(i.f)();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(S,{onRegistration:function(e){!function(e,t){var n=_(e);fetch("http://localhost:3000/api/users",n).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return t(e)}))}(e,(function(e){e._id?(Object(I.b)("Account Created Successfully"),localStorage.setItem("token",e.token),z(e.token,(function(e){t(e)})),l.replace("/all-cards")):Object(I.b)("Eror Acount was not created")}))},name:c?"Biz - Register":"Register",isBiz:c,setIsBiz:o})})},loggedIn:!1,icon:Object(j.jsx)(R.c,{})}],P=n(69),E=n(68),D=n(70),T=n(71);function q(e){var t=e.user,n=e.set,r=Object(i.f)();return Object(j.jsx)(P.a,{className:l.a.header,expand:"lg",sticky:"top",children:Object(j.jsxs)(E.a,{fluid:!0,children:[Object(j.jsx)(P.a.Toggle,{"aria-controls":"navbarScroll"}),Object(j.jsxs)(P.a.Collapse,{id:"navbarScroll",children:[Object(j.jsx)(D.a,{className:"me-auto my-2 my-lg-0",style:{maxHeight:"100px"},navbarScroll:!0,children:t._id?Object(j.jsx)(j.Fragment,{children:t._id&&t.biz?H.filter((function(e){return e.loggedIn})).map((function(e,t){return Object(j.jsxs)(D.a.Link,{to:e.href,as:b.b,className:l.a.navLink,children:[e.icon," ",e.name]},t)})):H.filter((function(e){return e.notBiz})).map((function(e,t){return Object(j.jsxs)(D.a.Link,{to:e.href,as:b.b,className:l.a.navLink,children:[e.icon," ",e.name]},t)}))}):Object(j.jsx)(j.Fragment,{children:H.filter((function(e){return!e.loggedIn})).map((function(e,t){return Object(j.jsxs)(D.a.Link,{to:e.href,as:b.b,className:l.a.navLink,children:[e.icon," ",e.name]},t)}))})}),t._id?Object(j.jsx)(T.a,{className:"d-flex",children:Object(j.jsxs)("button",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f5 dib lightest-blue",onClick:function(){return localStorage.clear(),n({}),void r.replace("/")},children:[Object(j.jsx)(d.b,{})," LogOut"]})}):null]})]})})}function J(e){var t=e.user,n=e.set;return Object(j.jsx)(i.c,{children:H.map((function(e,r){return Object(j.jsx)(i.a,{path:e.href,exact:!0,children:Object(j.jsx)(e.page,{set:n,user:t})},r)}))})}function M(e){var t=e.user,n=e.set;return Object(j.jsxs)(b.a,{children:[Object(j.jsx)(q,{user:t,set:n}),Object(j.jsx)(J,{set:n,user:t})]})}var Z=function(){var e=r.useState({}),t=Object(s.a)(e,2),n=t[0],a=t[1];return r.useEffect((function(){z(localStorage.getItem("token"),(function(e){a(e)}))}),[]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(M,{user:n,set:a}),Object(j.jsx)(I.a,{})]})};n(62),n(63),n(64);c.a.render(Object(j.jsx)(h,{children:Object(j.jsx)(Z,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.2f4e4849.chunk.js.map